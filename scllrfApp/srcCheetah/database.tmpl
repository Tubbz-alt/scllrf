#for $p in $registers
  #if $p.has_key('nelms')
record(waveform, "\$(P):${p.name.upper()}")
{
    field(PINI, "YES")
    #if not($p.has_key('access')) or ($p.access == 'r')
      #if $p.has_key('dtype')
        #if $p.dtype == "string"
    field(DTYP, "asynOctetRead")
    field(FTVL, "CHAR")
        #end if
      #else
    field(DTYP, "asynInt32ArrayIn")
    field(FTVL, "ULONG")
      #end if
    #else
      #if $p.has_key('dtype')
        #if $p.dtype == "string"
    field(DTYP, "asynOctetWrite")
    field(FTVL, "CHAR")
        #end if
      #else
    field(DTYP, "asynInt32ArrayOut")
    field(FTVL, "ULONG")
      #end if
    #end if
    field(NELM, "${p.nelms}")
    field(INP,  "@asyn(\$(PORT),0) ${p.name.upper()}")
    field(SCAN, "I/O Intr")
    info(autosaveFields, "VAL DESC EGU HOPR LOPR PREC")
}

  #else
    #if not($p.has_key('access')) or ($p.access == 'r')
record(longin, "\$(P):${p.name.upper()}")
{
    field(PINI, "YES")
    field(DTYP, "asynInt32")
    field(INP,  "@asyn(\$(PORT),0) ${p.name.upper()}")
    field(SCAN, "I/O Intr")
    info(autosaveFields, "DESC HOPR LOPR HIHI HHSV HIGH HSV LOW LSV LOLO LLSV HYST ADEL MDEL")
}
    #else if $p.access == 'w'
record(longout, "\$(P):${p.name.upper()}")
{
    field(PINI, "YES")
    field(DTYP, "asynInt32")
    field(OUT,  "@asyn(\$(PORT),0) ${p.name.upper()}")
    field(SCAN, "I/O Intr")
    info(asyn:READBACK, "1")
    info(autosaveFields, "VAL DESC HOPR LOPR HIHI HHSV HIGH HSV LOW LSV LOLO LLSV HYST ADEL MDEL")
}
    #end if
  #end if
#end for

#if $varExists('commands')
  #for $c in $commands
record(longout, "\$(P):C_${c.name.upper()}")
{
    field(DTYP, "asynInt32")
    field(OUT,  "@asyn(\$(PORT),0) C_${c.name.upper()}")
    field(SCAN, "I/O Intr")
    info(asyn:READBACK, "1")
    info(autosaveFields, "DESC")
}
  #end for
#end if
